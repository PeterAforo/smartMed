-- Start with just patients and appointments to test basic functionality

-- Insert sample patients
INSERT INTO public.patients (id, tenant_id, branch_id, patient_number, first_name, last_name, gender, date_of_birth, phone, email, address, emergency_contact_name, emergency_contact_phone, allergies, status, medical_history, current_medications, insurance_info, created_by) VALUES
('550e8400-e29b-41d4-a716-446655440001', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), 'P001', 'John', 'Smith', 'male', '1985-03-15', '+1-555-0101', 'john.smith@email.com', '123 Main St, City, State 12345', 'Jane Smith', '+1-555-0102', ARRAY['Penicillin'], 'active', '{"conditions": ["Hypertension"], "surgeries": []}', '["Lisinopril 10mg daily"]', '{"provider": "Blue Cross", "policy_number": "BC123456789"}', (SELECT user_id FROM public.profiles LIMIT 1)),
('550e8400-e29b-41d4-a716-446655440002', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), 'P002', 'Maria', 'Garcia', 'female', '1992-07-22', '+1-555-0201', 'maria.garcia@email.com', '456 Oak Ave, City, State 12345', 'Carlos Garcia', '+1-555-0202', ARRAY['Latex', 'Shellfish'], 'active', '{"conditions": ["Diabetes Type 2"], "surgeries": ["Appendectomy 2018"]}', '["Metformin 500mg twice daily"]', '{"provider": "Aetna", "policy_number": "AET987654321"}', (SELECT user_id FROM public.profiles LIMIT 1)),
('550e8400-e29b-41d4-a716-446655440003', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), 'P003', 'David', 'Johnson', 'male', '1978-11-08', '+1-555-0301', 'david.johnson@email.com', '789 Pine St, City, State 12345', 'Sarah Johnson', '+1-555-0302', ARRAY[]::text[], 'active', '{"conditions": [], "surgeries": []}', '[]', '{"provider": "United Healthcare", "policy_number": "UHC456789123"}', (SELECT user_id FROM public.profiles LIMIT 1)),
('550e8400-e29b-41d4-a716-446655440004', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), 'P004', 'Emily', 'Brown', 'female', '1995-05-30', '+1-555-0401', 'emily.brown@email.com', '321 Elm St, City, State 12345', 'Michael Brown', '+1-555-0402', ARRAY['Aspirin'], 'active', '{"conditions": ["Asthma"], "surgeries": []}', '["Albuterol inhaler as needed"]', '{"provider": "Cigna", "policy_number": "CIG789123456"}', (SELECT user_id FROM public.profiles LIMIT 1)),
('550e8400-e29b-41d4-a716-446655440005', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), 'P005', 'Robert', 'Wilson', 'male', '1965-12-12', '+1-555-0501', 'robert.wilson@email.com', '654 Maple Dr, City, State 12345', 'Linda Wilson', '+1-555-0502', ARRAY['Codeine'], 'active', '{"conditions": ["High Cholesterol", "Arthritis"], "surgeries": ["Knee replacement 2020"]}', '["Atorvastatin 20mg daily", "Ibuprofen 400mg as needed"]', '{"provider": "Medicare", "policy_number": "MED123456789"}', (SELECT user_id FROM public.profiles LIMIT 1));

-- Insert sample appointments
INSERT INTO public.appointments (id, tenant_id, branch_id, patient_id, appointment_date, appointment_time, appointment_type, status, chief_complaint, notes, duration_minutes, created_by) VALUES
('770e8400-e29b-41d4-a716-446655440001', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), '550e8400-e29b-41d4-a716-446655440002', CURRENT_DATE, '14:30:00', 'consultation', 'scheduled', 'Routine diabetes checkup', 'Patient reports good blood sugar control', 30, (SELECT user_id FROM public.profiles LIMIT 1)),
('770e8400-e29b-41d4-a716-446655440002', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), '550e8400-e29b-41d4-a716-446655440004', CURRENT_DATE - INTERVAL '1 day', '10:00:00', 'consultation', 'completed', 'Asthma follow-up', 'Inhaler technique reviewed, patient doing well', 25, (SELECT user_id FROM public.profiles LIMIT 1)),
('770e8400-e29b-41d4-a716-446655440003', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), '550e8400-e29b-41d4-a716-446655440001', CURRENT_DATE + INTERVAL '1 day', '09:15:00', 'consultation', 'scheduled', 'Blood pressure monitoring', 'Hypertension management review', 30, (SELECT user_id FROM public.profiles LIMIT 1)),
('770e8400-e29b-41d4-a716-446655440004', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), '550e8400-e29b-41d4-a716-446655440005', CURRENT_DATE + INTERVAL '2 days', '15:45:00', 'follow_up', 'scheduled', 'Post-surgery checkup', 'Knee replacement recovery assessment', 45, (SELECT user_id FROM public.profiles LIMIT 1)),
('770e8400-e29b-41d4-a716-446655440005', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), '550e8400-e29b-41d4-a716-446655440003', CURRENT_DATE - INTERVAL '2 days', '11:30:00', 'consultation', 'completed', 'Annual physical', 'Comprehensive health assessment completed', 60, (SELECT user_id FROM public.profiles LIMIT 1));

-- Insert sample revenue records 
INSERT INTO public.revenue (id, tenant_id, branch_id, patient_id, amount, revenue_type, description, payment_status, payment_method, invoice_number, transaction_date, created_by) VALUES
('880e8400-e29b-41d4-a716-446655440001', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), '550e8400-e29b-41d4-a716-446655440001', 150.00, 'consultation', 'Routine consultation - John Smith', 'paid', 'credit_card', 'INV-2024-001', CURRENT_DATE, (SELECT user_id FROM public.profiles LIMIT 1)),
('880e8400-e29b-41d4-a716-446655440002', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), '550e8400-e29b-41d4-a716-446655440002', 85.00, 'lab_test', 'Blood glucose test - Maria Garcia', 'paid', 'insurance', 'INV-2024-002', CURRENT_DATE - INTERVAL '1 day', (SELECT user_id FROM public.profiles LIMIT 1)),
('880e8400-e29b-41d4-a716-446655440003', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), '550e8400-e29b-41d4-a716-446655440004', 120.00, 'consultation', 'Asthma follow-up - Emily Brown', 'paid', 'debit_card', 'INV-2024-003', CURRENT_DATE - INTERVAL '1 day', (SELECT user_id FROM public.profiles LIMIT 1)),
('880e8400-e29b-41d4-a716-446655440004', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), '550e8400-e29b-41d4-a716-446655440005', 250.00, 'procedure', 'Physical therapy session - Robert Wilson', 'pending', 'insurance', 'INV-2024-004', CURRENT_DATE, (SELECT user_id FROM public.profiles LIMIT 1)),
('880e8400-e29b-41d4-a716-446655440005', (SELECT id FROM public.tenants WHERE code = 'DEFAULT'), (SELECT id FROM public.branches LIMIT 1), '550e8400-e29b-41d4-a716-446655440003', 200.00, 'consultation', 'Annual physical - David Johnson', 'paid', 'cash', 'INV-2024-005', CURRENT_DATE - INTERVAL '2 days', (SELECT user_id FROM public.profiles LIMIT 1));